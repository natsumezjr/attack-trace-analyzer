digraph {
    rankdir=LR;
    node [fontname="Arial"];

    subgraph cluster_backend {
        label="Backend API";
        style=filled;
        fillcolor="#e8f5e9";
        color="#1b5e20";
        
        B1 [label="Neo4j Query", shape=component, fillcolor="#c8e6c9"];
        B2 [label="Graph Data Assembly", shape=box, fillcolor="#e1f5fe"];
        B3 [label="JSON Response", shape=box, fillcolor="#e1f5fe"];
    }

    subgraph cluster_frontend {
        label="Frontend (Next.js + G6)";
        style=filled;
        fillcolor="#b2ebf2";
        color="#006064";
        
        F1 [label="Receive nodes/edges", shape=box, fillcolor="#e1f5fe"];
        F2 [label="Node Label Generation", shape=box, fillcolor="#b3e5fc"];
        F3 [label="Edge ID Generation", shape=box, fillcolor="#b3e5fc"];
        F4 [label="G6 Data Mapping", shape=box, fillcolor="#e1f5fe"];
        F5 [label="Dagre Layout", shape=box, fillcolor="#e1f5fe"];
        F6 [label="Style Binding", shape=box, fillcolor="#e1f5fe"];
        F7 [label="Graph Rendering", shape=box, fillcolor="#b3e5fc"];
    }

    subgraph cluster_data {
        label="Data Model";
        style=filled;
        fillcolor="#e3f2fd";
        color="#1565c0";
        
        D1 [label="nodes: array\nuid, ntype, key, props", shape=note, fillcolor="#fff9c4"];
        D2 [label="edges: array\nsrc_uid, dst_uid, rtype, props", shape=note, fillcolor="#fff9c4"];
        D3 [label="G6 Node\nid, data, label", shape=note, fillcolor="#fff9c4"];
        D4 [label="G6 Edge\nsource, target, id, data", shape=note, fillcolor="#fff9c4"];
    }

    B1 -> B2 -> B3;
    B3 -> F1 [label="JSON data"];
    F1 -> D1;
    F1 -> D2;
    D1 -> F2;
    D2 -> F3;
    F2 -> F4;
    F3 -> F4;
    F4 -> D3;
    F4 -> D4;
    D3 -> F5;
    D4 -> F5;
    F5 -> F6;
    F6 -> F7;
}
