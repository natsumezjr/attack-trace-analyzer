# Attack Trace Analyzer PPT 文案与配图清单（10 分钟版）

本文件用于答辩 PPT 的逐页文案与配图规划，口径与结构对齐：
`docs/10-交付与答辩/13-PPT大纲与演示脚本.md`。

## 0. 时间与结构

- 时间建议：PPT 6–7 分钟（8 页），现场演示 3–4 分钟。
- PPT 固定顺序（8 页）：
  1) 项目背景与目标  
  2) 系统总体架构  
  3) 多源采集与归一化  
  4) 检测与告警融合  
  5) 图谱建模与可视化  
  6) 溯源任务与算法  
  7) 测试与结果  
  8) 总结与展望（含演示转场）

## 1. 模块理解摘要（统一口播口径）

- 客户机（`client/`）：Falco / Filebeat / Suricata 采集 → ECS 归一化 → RabbitMQ 缓冲 → Go API 拉取。
- 中心机后端（`backend/`）：FastAPI + 单定时器流水线（拉取→入库→检测/融合→入图），OpenSearch 与 Neo4j 双存储，异步溯源任务。
- 中心机前端（`frontend/`）：Next.js + G6 图可视化，图查询、溯源任务创建与轮询、报告导出。
- 靶场与 C2（`deploy/` + `docs/90-运维与靶场/`）：6 节点固定拓扑，C2 提供 DNS/HTTP 证据点。

## 2. 评分覆盖矩阵（建议在备稿中掌握）

| 评分项 | 主要覆盖页 |
|---|---|
| 功能完成情况 | S3–S7 |
| 技术可行性与合理性 | S2–S6 |
| 技术难度与工作量 | S2–S7 |
| 内容条理性 | S1–S8（整体结构） |
| 格式规范性 | S1（标题信息完整） |
| 现场作品完成/稳定性/问题多少 | S7 + 现场演示 |

## 3. 幻灯片逐页文案

### S1 项目背景与目标（~45s）

**PPT 展示（建议排版）**
- 选题：基于主机日志、主机行为、网络流量的恶意攻击溯源  
- 课程要求 4 块：多源采集 / 攻击链关联 / 溯源技术 / ≥5 节点靶场  
- 项目目标：可演示、可解释、可复现（对齐验收标准）

**讲解要点（口播稿）**
本项目对标综合题目 2，目标是把多源数据统一口径，自动检测并构建攻击链路，
在 ≥5 节点靶场中完成“可演示、可解释、可复现”的溯源闭环。

**配图**
- V1 需求对标四象限示意（自绘）

**口径来源**
`docs/10-交付与答辩/10-课程设计要求与评分口径.md`  
`docs/20-需求与验收/20-需求分析报告.md`

---

### S2 系统总体架构（~60s）

**PPT 展示**
- 客户机侧：Falco/Filebeat/Suricata → ECS → RabbitMQ → 拉取 API  
- 中心机侧：单定时器 4 步流水线（拉取→入库→检测融合→入图）  
- 存储：OpenSearch（事实/告警/任务）+ Neo4j（实体关系图）  
- 前端：图查询 / 溯源任务 / 报告导出  
- 靶场：6 节点拓扑（center-01 + client-01..04 + c2-01）

**讲解要点**
强调“单定时器一条龙”保证顺序一致性与幂等；
强调 6 节点拓扑满足 ≥5 节点要求，C2 提供稳定 DNS/HTTP 证据。

**配图**
- V2 系统架构图（现有图）  
- V3 靶场拓扑图（自绘）

**口径来源**
`docs/40-概要设计/40-概要设计报告.md`  
`docs/90-运维与靶场/91-靶场部署.md`

---

### S3 多源采集与归一化（~60s）

**PPT 展示**
- 数据源：Falco（主机行为）/ Filebeat（系统日志）/ Suricata（网络流量）  
- 统一为 ECS 子集字段，补齐 `event.id` + 三时间字段  
- 客户机本地缓冲：RabbitMQ 队列 + 拉取接口（增量语义）

**讲解要点**
三类数据在客户机侧完成 ECS 归一化与 host 身份统一；中心机入库前再做最终字段校验，
确保跨传感器可关联、可回溯。

**配图**
- V4 采集链路示意（自绘：3 传感器→ECS→RabbitMQ→API）  
- V5 客户机 API `total>0` 截图（/falco /filebeat /suricata 任一合并截图）

**口径来源**
`docs/50-详细设计/客户机/50-总体.md`  
`docs/50-详细设计/客户机/51-53-*.md`  
`docs/50-详细设计/客户机/54-55-*.md`

---

### S4 检测与告警融合（~60s）

**PPT 展示**
- Store-first 检测：Security Analytics + 传感器告警  
- Raw Findings → Canonical Findings（3 分钟时间桶、指纹去重）  
- Canonical 携带证据引用 `custom.evidence.event_ids`

**讲解要点**
Raw 保留原始告警，Canonical 作为图谱与溯源主输入；
融合去重按 technique/host/entity/时间桶构指纹，提升可解释性和稳定性。

**配图**
- V6 Raw/Canonical 查询结果截图（OpenSearch 或 API）  
- V7 Canonical 文档证据字段截图（含 `custom.evidence.event_ids`）

**口径来源**
`docs/50-详细设计/中心机/63-检测与告警融合.md`  
`docs/80-规范/83-告警数据规范.md`

---

### S5 图谱建模与可视化（~60s）

**PPT 展示**
- ECS → Graph：Host/User/Process/File/Domain/IP 节点  
- 边属性含 `event.id`、`ts_float`、证据引用  
- 前端图可视化：告警边高亮、节点详情可追溯

**讲解要点**
只接受 Telemetry + Canonical 入图，边上记录证据与告警标记；
前端图可视化支持时间窗检索与证据追溯。

**配图**
- V8 前端图谱截图（含告警边高亮）  
- V9 边详情面板截图（展示 `event.id` + `custom.evidence.event_ids`）

**口径来源**
`docs/50-详细设计/中心机/64-65-*.md`  
`docs/50-详细设计/前端/75-图谱可视化与交互.md`

---

### S6 溯源任务与算法（~70s）

**PPT 展示**
- 节点点选 → 创建任务 → 状态机（queued/running/succeeded）  
- 子图检索 + 候选路径评分 → 写回 `analysis.*`  
- LLM 选择器 + 可回退机制（无外网也能稳定演示）

**讲解要点**
任务异步执行，结果写回边属性并可复查；
LLM 不可用时回退到启发式路径选择，保证演示稳定。

**配图**
- V10 任务状态截图（前端或 API）  
- V11 状态机示意图（自绘）  
- V12 写回边高亮截图（analysis.is_path_edge）

**口径来源**
`docs/50-详细设计/分析/70-72-*.md`

---

### S7 测试与结果（~60s）

**PPT 展示**
- 测试策略：单元/集成/系统/验收  
- 自动化测试：182 passed / 1 skipped（全量）  
- 验收闭环：AC-01..AC-08 覆盖（多节点、入库、告警、图谱、溯源、报告）

**讲解要点**
自动化测试验证存储、融合、图谱与溯源关键链路；
验收按固定剧本与证据点执行，确保稳定复现。

**配图**
- V13 pytest 结果截图或表格  
- V14 验收证据截图（端口监听/入库 `total>0`）

**口径来源**
`docs/96-测试/96-测试分析报告.md`  
`docs/20-需求与验收/21-验收标准与验收用例.md`

---

### S8 总结与展望（~45s，含演示转场）

**PPT 展示**
- 已完成：多源采集、检测融合、图谱溯源、APT 相似度、报告导出  
- 展望：更多规则/更细粒度证据/更丰富可视化  
- 演示流程提示（1 句转场）：按固定脚本 1→9 步展示闭环

**讲解要点**
一句话总结“多源归一化 + 图谱溯源闭环”；
随后进入演示（按 `13-PPT大纲与演示脚本.md`）。

**配图**
- V15 报告导出截图  

**口径来源**
`docs/50-详细设计/前端/76-报告导出.md`  
`docs/10-交付与答辩/13-PPT大纲与演示脚本.md`

## 4. 配图清单（含来源与命名建议）

> 截图命名规则：`YYYYMMDD-序号-证据主题.png`（见 `docs/10-交付与答辩/14-录像与截图清单.md`）

| ID | 用途页 | 内容 | 来源/生成方式 | 备注 |
|---|---|---|---|---|
| V1 | S1 | 课程要求 4 块对标图 | 自绘（四象限/流程图） | 强调对标与目标 |
| V2 | S2 | 系统架构图 | `docs/10-交付与答辩/images/68282b25772f2821f09fe07657065c8aa00a56f30f9a7a533ee9f975278b66b7.jpg` | 现有图 |
| V3 | S2 | 6 节点靶场拓扑图 | 自绘，参考 `docs/90-运维与靶场/91-靶场部署.md` | center-01/client-01..04/c2-01 |
| V4 | S3 | 采集链路图 | 自绘，参考 `docs/50-详细设计/客户机/50-总体.md` | 3 传感器→ECS→MQ→API |
| V5 | S3 | 客户机 API `total>0` | 按 `docs/90-运维与靶场/94-验证清单.md` 执行 curl | 选 1–2 张截图 |
| V6 | S4 | Raw Findings 查询 | `POST /api/v1/findings/search`（stage=raw）截图 | 显示 `total>0` |
| V7 | S4 | Canonical Finding 证据字段 | `stage=canonical` 结果中展示 `custom.evidence.event_ids` | 证据可回溯 |
| V8 | S5 | 图谱可视化截图 | 前端 `/trace` 图视图截图 | 告警边高亮 |
| V9 | S5 | 边详情面板 | 点击边后详情面板截图 | 显示 `event.id` |
| V10 | S6 | 任务状态截图 | `GET /api/v1/analysis/tasks/{task_id}` 或前端任务面板 | queued/running/succeeded |
| V11 | S6 | 任务状态机图 | 自绘（3 状态） | 简洁小图 |
| V12 | S6 | 写回边高亮 | 任务完成后 `analysis_edges_by_task` 可视化 | 蓝色关键路径 |
| V13 | S7 | pytest 结果 | 运行测试输出截图或表格 | 182 passed/1 skipped |
| V14 | S7 | 验收证据截图 | 端口监听或 `events/search total>0` | 体现稳定性 |
| V15 | S8 | 报告导出截图 | 前端导出 `attack-trace-report-<task_id>.md` | 复现性 |

## 5. 演示脚本入口（备忘）

- 演示固定脚本：`docs/10-交付与答辩/13-PPT大纲与演示脚本.md`
- 攻击复现剧本：`docs/20-需求与验收/22-攻击场景与复现剧本.md`
- 验收清单：`docs/90-运维与靶场/94-验证清单.md`

